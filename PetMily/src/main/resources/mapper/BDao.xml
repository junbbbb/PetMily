<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
						
<mapper namespace="com.springlec.base.dao.BDao">

	<!-- list -->
	<select id="listDao" resultType="com.springlec.base.model.BDto">
		SELECT pid, ptitle, pcontent, pinitdate, user_uid FROM posting
	</select>
	
	<!-- insert -->
	<insert id="writeDao">
		INSERT INTO pet_board (title,content,writer,initdate) VALUES (#{title}, #{content}, #{writer}, now())
	</insert>
	
	<!-- 수정화면으로 가져올때 -->
	<select id="viewDao" resultType="com.springlec.base.model.BDto">
		SELECT * FROM pet_board WHERE seqno = #{seqno}
	</select>
	
	<!-- update -->
	<update id="modifyDao" >
		UPDATE pet_board SET title = #{title}, content= #{content}, writer = #{writer} where seqno = #{seqno};
	</update>
	
	<!-- delete -->
	<delete id="deleteDao"> 
		DELETE FROM pet_board WHERE seqno=#{seqno} 
	</delete>
	
	<!-- search-->
	<select id="searchDao" resultType="com.springlec.base.model.BDto">
		SELECT * FROM pet_board WHERE ${keyword} like #{content}
	</select>
	
	
	<!-- paging[s] -->
	<select id="postingListRowDao" resultType="_int">
		select count(*) from posting where pdeletedate is null and pcategory = #{pcategory}
	</select>
	
	<select id="postingGetListDao" resultType="com.springlec.base.model.PagingDTO">
		select pid, ptitle, plocation, pinitdate, user_uid, pcategory from posting 
					where pdeletedate is null and ${option} like #{query} 
					order by pid desc limit #{start},#{rowLength}
	</select>
	<!-- paging[e] -->
	
	<!-- petsepec detail view -->
	<select id="viewPetspecDetailDao" resultType="string">
		select pscontent from petspec where psbreeds = #{psbreeds}
	</select>

</mapper>